var forenameStorage,emailStorage,body=document.querySelector("body"),contact=document.querySelector(".contact-button"),popup=document.querySelector(".modal-feedback"),close=document.querySelector(".close-button"),forename=document.querySelector(".feedback-form-item [name=name]"),email=document.querySelector(".feedback-form-item [name=email]"),text=document.querySelector(".feedback-form-item [name=text-field]"),form=document.querySelector(".feedback-form"),isStorageSupport=!0,sliderNav=document.querySelectorAll(".slider-nav-button"),sliderItems=document.querySelectorAll(".slider-item");try{forenameStorage=localStorage.getItem("name"),emailStorage=localStorage.getItem("email")}catch(e){isStorageSupport=!1}contact.addEventListener("click",function(e){e.preventDefault(),popup.classList.remove("popup"),body.classList.add("blackout"),popup.classList.add("modal-bounce"),forenameStorage?(forename.value=forenameStorage,email.focus()):forenameStorage&&emailStorage?(forename.value=forenameStorage,email.value=emailStorage,text.focus()):forename.focus()}),close.addEventListener("click",function(e){e.preventDefault(),body.classList.remove("blackout"),popup.classList.add("popup"),popup.classList.remove("modal-error")}),form.addEventListener("submit",function(e){forename.value&&email.value&&text.value?isStorageSupport&&(localStorage.setItem("name",forename.value),localStorage.setItem("email",email.value)):(e.preventDefault(),popup.classList.remove("modal-error"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),popup.classList.contains("popup")||(body.classList.remove("blackout"),popup.classList.add("popup"),popup.classList.remove("modal-error")))});for(var i=0;i<sliderNav.length;i++)sliderNav[i].addEventListener("click",function(e){var t=e.target;document.querySelector(".slider-item-current").classList.remove("slider-item-current"),sliderItems[t.dataset.id].classList.add("slider-item-current"),document.querySelector(".slider-nav-button-current").classList.remove("slider-nav-button-current"),t.classList.add("slider-nav-button-current"),document.body.style.backgroundColor=t.dataset.color});ymaps.ready(function(){var e=new ymaps.Map("map",{center:[59.938631,30.323055],zoom:16,controls:[]},{searchControlProvider:"yandex#search"}),t=new ymaps.Placemark(e.getCenter(),!1,{iconLayout:"default#image",iconImageHref:"img/map-marker.svg",iconImageSize:[80,140],iconImageOffset:[-40,-140]});e.geoObjects.add(t)});